---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "pfptmeta_metaport_failover Resource - terraform-provider-pfptmeta"
subcategory: "Network"
description: |-
  MetaPort failover defines a failover model between a primary and a secondary MetaPort clusters.
---

# pfptmeta_metaport_failover (Resource)

MetaPort failover defines a failover model between a primary and a secondary MetaPort clusters.

## Example Usage

```terraform
resource "pfptmeta_network_element" "mapped-subnet" {
  name           = "ms"
  mapped_subnets = ["0.0.0.0/0"]
}

resource "pfptmeta_metaport" "metaport1" {
  name = "metaport1"
}

resource "pfptmeta_metaport" "metaport2" {
  name = "metaport2"
}

resource "pfptmeta_metaport_cluster" "metaport_cluster1" {
  name      = "metaport cluster1"
  metaports = [pfptmeta_metaport.metaport1.id]
}

resource "pfptmeta_metaport_cluster" "metaport_cluster2" {
  name      = "metaport cluster2"
  metaports = [pfptmeta_metaport.metaport2.id]
}

resource "pfptmeta_notification_channel" "mail" {
  name        = "mail-channel"
  description = "mail channel description"
  email_config {
    recipients = ["user1@example.com", "user2@example.com"]
  }
}

resource "pfptmeta_metaport_failover" "failover" {
  name                  = "metaport failover name"
  description           = "metaport failover description"
  mapped_elements       = [pfptmeta_network_element.mapped-subnet.id]
  cluster_1             = pfptmeta_metaport_cluster.metaport_cluster1
  cluster_2             = pfptmeta_metaport_cluster.metaport_cluster2
  notification_channels = [pfptmeta_notification_channel.mail.id]
  failback {
    trigger = "auto"
  }
  failover {
    delay     = 1
    threshold = 1
    trigger   = "auto"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **name** (String)

### Optional

- **cluster_1** (String) Priority #1 MetaPort cluster ID. This cluster is active by default. When failover condition is met for this cluster, the higher priority cluster becomes active.
- **cluster_2** (String) Priority #2 MetaPort cluster ID. This cluster becomes active, when failover condition is met for a lower priority cluster.
- **description** (String)
- **failback** (Block List, Max: 1) Primary to secondary cluster switchover. (see [below for nested schema](#nestedblock--failback))
- **failover** (Block List, Max: 1) Secondary to primary cluster switchover. (see [below for nested schema](#nestedblock--failover))
- **mapped_elements** (Set of String) List of mapped element IDs
- **notification_channels** (List of String) List of notification channel IDs

### Read-Only

- **active_cluster** (String)
- **id** (String) The ID of this resource.

<a id="nestedblock--failback"></a>
### Nested Schema for `failback`

Required:

- **trigger** (String) ENUM: [auto, manual], defaults to auto.


<a id="nestedblock--failover"></a>
### Nested Schema for `failover`

Required:

- **delay** (Number) Number of minutes to wait before execution of failover, defaults to 1.
- **threshold** (Number) Minimum number of healthy MetaPorts to keep a cluster active. Zero (0) denotes all MetaPorts in a cluster.
- **trigger** (String) ENUM: [auto, manual], defaults to auto.
