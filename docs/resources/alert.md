---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "Resource pfptmeta_alert - terraform-provider-pfptmeta"
subcategory: "Notifications"
description: |-
  Alerts let you monitor data including network traffic and activities, or various security events like password resets and missing certificates.
  You can examine and filter any type of event, as well as define alert notifications to be sent to email, webhooks (integrating with SaaS apps), PagerDuty or Slack.
  Alerts can be configured using either spike_condition or threshold_condition
---

# Resource (pfptmeta_alert)

Alerts let you monitor data including network traffic and activities, or various security events like password resets and missing certificates.
You can examine and filter any type of event, as well as define alert notifications to be sent to email, webhooks (integrating with SaaS apps), PagerDuty or Slack.
Alerts can be configured using either `spike_condition` or `threshold_condition`

## Example Usage

```terraform
resource "pfptmeta_notification_channel" "channel" {
  name = "mail-channel"
  email_config {
    recipients = ["user1@example.com", "user2@example.com"]
  }
}

resource "pfptmeta_alert" "spike_condition_alert" {
  name           = "spike"
  description    = "alert on metaport disconnection"
  channels       = [pfptmeta_notification_channel.channel.id]
  group_by       = "src_id"
  notify_message = "metaport disconnected"
  query_text     = "event:keepalive AND src_type:MetaPort"
  source_type    = "traffic_audit"
  spike_condition {
    spike_ratio = 100
    spike_type  = "down"
    time_diff   = 5
  }
  window = 5
}


resource "pfptmeta_alert" "threshold_condition_alert" {
  name           = "threshold"
  description    = "alert on new device onboard"
  channels       = [pfptmeta_notification_channel.channel.id]
  notify_message = "device onboarded"
  query_text     = "action:CREATE AND resource_type:Device"
  source_type    = "api_audit"
  threshold_condition {
    formula   = "count"
    op        = "greater"
    threshold = 0
  }
  window = 60
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `channels` (List of String) List of notification channel IDs.
- `name` (String)
- `query_text` (String)
- `source_type` (String) Logs type. Supported log types:
	- **security_audit**- The `security_audit` logs provide the administrator visibility into events which are generated by device and user security-related activity, such as user authenticating into Proofpoint NaaS, users changing their passwords, posture check failures, etc. See [here](https://help.metanetworks.com/knowledgebase/admin_console_logs/#security-logs) for details.
	- **api_audit** - The `api_audit` logs capture details of administrator activity: the timestamp and identity of administrators who accessed the Proofpoint NaaS tenant, and configuration changes that were made by the administrator. See [here](https://help.metanetworks.com/knowledgebase/admin_console_logs/#audit-logs) for details.
	- **traffic_audit** - The `traffic_audit` logs provide detailed visibility into each element in the system covering network traffic including DNS and other OSI Layer 3 and 4 traffic details. See [here](https://help.metanetworks.com/knowledgebase/admin_console_logs/#traffic-logs) for details.
	- **metaproxy_audit** - The `metaproxy_audit` logs provide the administrator visibility into the clientless access of their employees to web applications configured via EasyLink policy. See [here](https://help.metanetworks.com/knowledgebase/admin_console_logs/#metaconnect-web-logs) for details.
	- **webfilter_audit** - The `webfilter_audit` logs provide the administrator visibility into the events generated by the Web Security engine. See [here](https://help.metanetworks.com/knowledgebase/logs_ws/) for details
.
- `window` (Number) The time window of the check (in mins), ENUM: `1`, `3`, `5`, `10`, `30`, `60`, `360`, `1440`, `2880`, `10080`.

### Optional

- `description` (String)
- `enabled` (Boolean)
- `group_by` (String) The group by field name.
- `notify_message` (String) Creates a custom message that will be sent to your notification channels.
	You can use free text and/or alert field names surrounded with a "${ }". For example, "${hits} have failed to login".
- `spike_condition` (Block List, Max: 1) (see [below for nested schema](#nestedblock--spike_condition))
- `threshold_condition` (Block List, Max: 1) (see [below for nested schema](#nestedblock--threshold_condition))

### Read-Only

- `id` (String) The ID of this resource.
- `type` (String)

<a id="nestedblock--spike_condition"></a>
### Nested Schema for `spike_condition`

Required:

- `spike_ratio` (Number) The difference between hits that triggers alert (in percents).
- `spike_type` (String) Spike type, ENUM: `up`, `down`, `both`.
- `time_diff` (Number) Time difference in minutes between current and reference window, Enum: `1`, `3`, `5`, `60`, `1440`, `10080`.

Optional:

- `min_hits` (Number) Minimum number of hits in current window to check the spike.


<a id="nestedblock--threshold_condition"></a>
### Nested Schema for `threshold_condition`

Required:

- `op` (String) Operator used to compare to the threshold, ENUM: `greater`, `greaterequals`, `less`, `lessequals`, `equals`.
- `threshold` (Number) The threshold to compare result of the formula.

Optional:

- `formula` (String) Mathematical formula to run on the events, ENUM: `count`.
